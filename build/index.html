<html ng-app='weeklyMenuApp'>
  <head>
    <meta charset='UTF-8'>
    <meta content='width=device-width, initial-scale=1' name='viewport'>
    <title>Меню на тиждень</title>
    <link href='styles/style.css' rel='stylesheet'>
  </head>
  <body>
    <header>
      <div class='container'>
        <div class='logo'>
          <img src='images/chef_hat_logo.png'>
        </div>
        <h2 class='title'>Меню на тиждень</h2>
      </div>
    </header>
    <nav>
      <div class='container'>
        <ul>
          <li ng-class='getClass("/home")'>
            <a href='#/home'>Перелік рецептів</a>
          </li>
          <li ng-class='getClass("/recipes")'>
            <a href='#/recipes'>Додати рецепт</a>
          </li>
          <li ng-class='getClass("/ingredients")'>
            <a href='#/ingredients'>Інгредієнти</a>
          </li>
        </ul>
      </div>
    </nav>
    <div class='message' ng-class='{ error: statusMessage.type == "error", success: statusMessage.type == "success"}'>
      {{ statusMessage.text }}
    </div>
    <div class='page-body' ng-view=''></div>
    <script id='calendar.html' type='text/ng-template'>
      <div class='container margin-top-25'>
        <section class='row calendar-pagination'>
          <div class='col-xs-1 pull-right pagination-container'>
            <button ng-click='prevWeek()' ng-disabled='calendarService.currentWeek === 1'>
              <span class='glyphicon glyphicon-backward'></span>
            </button>
            <div class='current-week'>{{ "Тиждень №" + calendarService.currentWeek() }}</div>
            <button ng-click='nextWeek()'>
              <span class='glyphicon glyphicon-forward'></span>
            </button>
          </div>
        </section>
        <section class='row calendar'>
          <div class='calendar-days'>
            <div class='col-xs-1 day-header'>Понеділок</div>
            <div class='col-xs-1 day-header'>Вівторок</div>
            <div class='col-xs-1 day-header'>Середа</div>
            <div class='col-xs-1 day-header'>Четвер</div>
            <div class='col-xs-1 day-header'>П'ятниця</div>
            <div class='col-xs-1 day-header'>Субота</div>
            <div class='col-xs-1 day-header'>Неділя</div>
          </div>
          <div class='calendar-recipes'>
            <div class='day col-xs-1' drag-enter-leave-animation='' ng-class='{ {{day.name}}: true, today: day.today() }' ng-repeat='day in weeklyMenu' ondragover='event.preventDefault()'>
              <div class='date'>{{ day.date | date }}</div>
              <div class='recipe' ng-repeat='recipe in day.recipes track by $index'>
                <recipecontrols></recipecontrols>
                <h5 class='recipe-title'>
                  {{ recipe.name }}
                </h5>
                <ul class='recipe-ingredients'>
                  <li ng-repeat='ing in recipe.ingredients'>
                    {{ ing.parent.name }}
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </section>
      </div>
    </script>
    <script id='recipesContainer.html' type='text/ng-template'>
      <div class='container recipes-container'>
        <div class='recipe' data-id='{{ recipe.id }}' draggable='true' ng-repeat='recipe in recipes'>
          <recipecontrols></recipecontrols>
          {{ recipe.name }}
        </div>
      </div>
    </script>
    <script id='home.html' type='text/ng-template'>
      <calendar></calendar>
      <recipescontainer></recipescontainer>
    </script>
    <script id='recipesCRUD.html' type='text/ng-template'>
      <div class='container margin-top-25'>
        <section class='row'>
          <form class='recipe-form col-md-12' name='recipeForm' role='form'>
            <div class='form-group'>
              <label for='recipe-title'>Назва рецепту</label>
              <input class='form-control material-shadow' ng-model='recipe.name' oninvalid='setCustomValidity("Це поле не може бути пустим")' required='' type='text'>
            </div>
            <div class='form-group recipe-ingredients'>
              <label>Інгридієнти</label>
              <div class='dropdown-filter row'>
                <div class='col-xs-8'>
                  <input class='form-control material-shadow no-right-border-radius' ng-model='ingModel.name' placeholder='почніть вводити назву інгридієнта' type='text'>
                  <ul class='available-ingredients material-shadow'>
                    <li class='ingredient-item' ng-click='chooseIngredient(item)' ng-repeat='item in ingredients | filter:ingModel.name'>
                      {{ item.name }}
                    </li>
                  </ul>
                </div>
                <div class='col-xs-2'>
                  <input class='form-control material-shadow no-border-radius' ng-model='ingModel.amount' placeholder='к-сть' type='text'>
                </div>
                <div class='col-xs-1'>
                  <select class='form-control material-shadow no-border-radius' ng-model='ingModel.units'>
                    <option value='шт.'>шт.</option>
                    <option value='кг'>кг</option>
                    <option value='г'>г</option>
                    <option value='л'>л</option>
                    <option value='мл'>мл</option>
                    <option value='ч.л.'>ч.л.</option>
                    <option value='стол.л.'>стол.л.</option>
                  </select>
                </div>
                <div class='col-xs-1'>
                  <button class='btn btn-default material-shadow no-left-border-radius' ng-click='addIngredient()'>Додати</button>
                </div>
              </div>
              <div class='ingredient form-control material-shadow' ng-repeat='ingredient in recipe.ingredients'>
                {{ ingredient.parent.name + ' ' + ingredient.amount + ingredient.units }}
                <div class='remove-ingredient' ng-click='removeIngredient(recipe.ingredients[$index])'>&#57364;</div>
              </div>
            </div>
            <a class='btn btn-default pull-right material-shadow' href='#/home'>
              Повернутись на головну
            </a>
            <button class='btn btn-success pull-right material-shadow' ng-click='saveRecipe()'>
              Зберегти рецепт
            </button>
          </form>
        </section>
      </div>
    </script>
    <script id='recipeControls.html' type='text/ng-template'>
      <div class='recipe-controls'>
        <span class='glyphicon glyphicon-chevron-left'></span>
        <a class='glyphicon glyphicon-pencil' href='#/recipes/{{ recipe.id }}' title='Редагувати'></a>
        <span class='glyphicon glyphicon-remove' ng-click='removeRecipe(recipe, day)' title='Видалити'></span>
      </div>
    </script>
    <script id='ingredients.html' type='text/ng-template'>
      <div class='container margin-top-25 ingredients-container'>
        <div class='row ing-input-wrapper'>
          <input class='form-control col-xs-3 ing-name material-shadow' ng-model='ingredient.name' placeholder='введіть назву інгридієнта' type='text'>
          <button class='btn btn-default ing-add material-shadow' ng-click='saveIngredient()'>Зберегти</button>
        </div>
        <div class='row'>
          <div class='recipe' ng-class='ingredientActive(item)' ng-click='editIngredient(item)' ng-repeat='item in ingredients' title='клікніть аби змінити'>
            {{ item.name }}
            <span class='glyphicon glyphicon-remove' ng-click='removeIngredient(item)' title='Видалити'></span>
          </div>
        </div>
      </div>
    </script>
    <script src='scripts/main.min.js'></script>
  </body>
</html>
