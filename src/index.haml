%html{:'ng-app' => 'weeklyMenuApp'}
  %head
    %meta{:charset => 'UTF-8'}
    %meta{:name => 'viewport', :content => 'width=device-width, initial-scale=1'}
    %title Меню на тиждень
    %link{:href => 'styles/style.css', :rel => 'stylesheet'}
  %body
    %header
      .container
        .logo
          %img{:src => 'images/chef_hat_logo.png'}
        %h2.title Меню на тиждень
    %nav
      .container
        %ul
          %li
            %a{:href => '#/home'} Перелік рецептів
          %li
            %a{:href => '#/recipes'} Додати рецепт
    
    .message{:'ng-class' => '{ error: statusMessage.type == "error", success: statusMessage.type == "success"}'}
      {{ statusMessage.text }}
    %div.page-body{:'ng-view' => ''}

    %script{:type => 'text/ng-template', :id => 'calendar.html'}
      .container.margin-top-25
        %section.row.calendar
          .calendar-days
            .col-xs-1.day-header Понеділок
            .col-xs-1.day-header Вівторок
            .col-xs-1.day-header Середа
            .col-xs-1.day-header Четвер
            .col-xs-1.day-header П'ятниця
            .col-xs-1.day-header Субота
            .col-xs-1.day-header Неділя
          .calendar-recipes
            .day.col-xs-1{:'ng-repeat' => 'day in weeklyMenu', :'ng-class' => '{ {{day.name}}: true, today: day.today() }', :ondragover => "event.preventDefault()", :'drag-enter-leave-animation' => ''}
              .recipe{:'ng-repeat' => 'recipe in day.recipes track by $index'}
                %recipecontrols
                %h5.recipe-title
                  {{ recipe.name }}
                %ul.recipe-ingredients
                  %li{:'ng-repeat' => 'ingredient in recipe.ingredients'}
                    {{ ingredient.name }}

    %script{:type => 'text/ng-template', :id => 'recipesContainer.html'}
      .container.recipes-container
        .recipe{:'ng-repeat' => 'recipe in recipes', :draggable => 'true', :'data-id' => '{{ recipe.id }}'}
          %recipecontrols
          {{ recipe.name }}

    %script{:type => 'text/ng-template', :id => 'home.html'}
      %calendar
      %recipescontainer

    %script{:type => 'text/ng-template', :id => 'recipesCRUD.html'}
      .container.margin-top-25
        %section.row
          %form.recipe-form.col-md-12{:role => "form", :name => "recipeForm"}
            .form-group
              %label{:for => "recipe-title"} Назва рецепту
              %input.form-control#recipe-title{:type => "text", :'ng-model' => 'recipe.name', :required => '', :oninvalid => 'setCustomValidity("Це поле не може бути пустим")'}
            .form-group.recipe-ingredients
              %label Інгридієнти
              .ingredient{:'ng-repeat' => 'ingredient in recipe.ingredients'}
                %input.form-control{:type => "text", :'ng-model' => 'ingredient.name', :required => '', :oninvalid => 'setCustomValidity("Це поле не може бути пустим")'}
                .remove-ingredient{:'ng-click' => 'removeIngredient(recipe.ingredients[$index])'} &#57364;
              %button.btn.btn-default{:'ng-click' => 'addIngredient()'}
                Додати інгредієнт
            %a.btn.btn-default.pull-right{:href => '#/home'}
              Повернутись на головну
            %button.btn.btn-success.pull-right{:'ng-click' => 'saveRecipe()'}
              Зберегти рецепт

    %script{:type => 'text/ng-template', :id => 'recipeControls.html'}
      .recipe-controls
        %span.glyphicon.glyphicon-chevron-left
        %a.glyphicon.glyphicon-pencil{:title => 'Редагувати', :href => '#/recipes/{{ recipe.id }}'}
        %span.glyphicon.glyphicon-remove{:title => 'Видалити', :'ng-click' => 'removeRecipe(recipe, day)'}

    %script{:src => 'scripts/main.min.js'}